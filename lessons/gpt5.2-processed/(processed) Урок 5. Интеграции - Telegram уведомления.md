
К этому моменту у нас уже получился полноценный проект:

* лендинг собирает лиды;
* мы видим конверсии через событийную модель;
* можем принимать события из внешних систем.

Теперь добавим ещё один важный элемент — **наблюдаемость и скорость реакции**.

Если новый лид появляется в системе, важно не просто сохранить его в базе, а **сразу начать работу**, пока интерес пользователя ещё «тёплый». Для этого настроим уведомления — например, отправку сообщения в Telegram при создании нового лида.

---

## Что нам понадобится

Чтобы получать уведомления в Telegram, нужно пройти несколько простых шагов:

* создать Telegram-бота через специального бота BotFather;
* открыть чат с этим ботом, чтобы он мог отправлять нам сообщения;
* связать лендинг с ботом;
* настроить формат уведомлений.

---

## Создаём Telegram-бота

Открываем Telegram и находим бота **BotFather**.

Просим его создать нового бота для нашего проекта, например:

* имя — *Landing Bot*
* ник — *ya_land_bot*

После создания BotFather выдаст токен — его нужно сохранить. Это ключ доступа к боту.

Далее:

1. Переходим в созданного бота.
2. Нажимаем `/start`.
3. Отправляем любое сообщение.

Теперь бот сможет писать нам в этот чат.

---

## Передаём задачу агенту

Дальше — подключаем интеграцию к проекту.
Вместо `<token>` вставляем токен, полученный от BotFather.

Промпт оставляем без изменений:

```
Ты опытный devops-инженер с навыками backend-разработчика.

Необходимо настроить интеграцию с Telegram-ботом для отправки сообщений по событиям из LogEvent.

Задачи:
- доработать docker-compose добавить в сервис app переменную TG_TOKEN=<token> 
- выполнить запрос GET https://api.telegram.org/bot<TG_TOKEN>/getUpdates, из ответа получить chat.id и записать его в переменную TG_CHAT_ID сервиса app
- при срабатывании события lead_created необходимо отправлять сообщение через бота TG_TOKEN в TG_CHAT_ID, в сообщении передавать информацию по созданному лиду
- перезапустить docker compose окружение 
- добавивить git коммит
```

---

## Проверяем работу уведомлений

После того как агент выполнит настройки:

1. Заходим на лендинг.
2. Заполняем форму.
3. Отправляем лид.

Если всё настроено корректно, сообщение о новом лиде почти мгновенно придёт в Telegram.

Теперь система не только сохраняет данные и считает конверсии, но и позволяет быстро реагировать на новые заявки.

---

## Можно ли управлять форматом сообщений?

Да. При желании можно попросить агента:

* вынести шаблоны сообщений Telegram в отдельные файлы;
* создать папку для шаблонов;
* управлять текстом уведомлений отдельно от основной логики.

Это удобно, если нужно менять формат сообщений без изменения основной части проекта.

---

<проверка знаний>
